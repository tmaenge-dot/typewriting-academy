import{aj as k,ak as I,N as n,m as e,ab as W,y as q,x as C,v as c,S as o,p as D,X as g,ai as x,q as E,al as B,am as L,U as T,ah as U,c as J,an as O,ao as X}from"./index-DiangOB9.js";const G=()=>{const i=k(),{login:b,isAuthenticated:p}=I(),[a,j]=n.useState({email:"",password:""}),[d,w]=n.useState(!1),[t,l]=n.useState({}),[u,h]=n.useState(!1);n.useEffect(()=>{p&&i("/",{replace:!0})},[p,i]);const y=s=>{const{name:r,value:A}=s.target;j(m=>({...m,[r]:A})),t[r]&&l(m=>({...m,[r]:""}))},f=()=>{const s={};return a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(s.email="Please enter a valid email address"):s.email="Email is required",a.password?a.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",l(s),Object.keys(s).length===0},v=async s=>{if(s.preventDefault(),!!f()){h(!0);try{const r=await b(a.email,a.password);r.success?(sessionStorage.setItem("loginSuccess","true"),sessionStorage.setItem("loginMessage","Welcome back! You're now signed in."),i("/",{replace:!0})):l({submit:r.error||"Login failed. Please try again."})}catch{l({submit:"Login failed. Please try again."})}finally{h(!1)}}},S=()=>{w(!d)},P=()=>{i("/sign-up")};return e.jsx(W,{maxWidth:"sm",sx:{mt:4,mb:4},children:e.jsx(q,{elevation:3,children:e.jsxs(C,{sx:{p:4},children:[e.jsxs(c,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,color:"primary",children:"Welcome Back"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"Sign in to Information Processing & Typewriting Learning Platform"})]}),t.submit&&e.jsx(D,{severity:"error",sx:{mb:3},children:t.submit}),e.jsxs(c,{component:"form",onSubmit:v,children:[e.jsx(g,{fullWidth:!0,name:"email",label:"Email Address",type:"email",value:a.email,onChange:y,error:!!t.email,helperText:t.email,margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(E,{color:"action"})})}}),e.jsx(g,{fullWidth:!0,name:"password",label:"Password",type:d?"text":"password",value:a.password,onChange:y,error:!!t.password,helperText:t.password,margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(U,{color:"action"})}),endAdornment:e.jsx(x,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:S,edge:"end",children:d?e.jsx(L,{}):e.jsx(T,{})})})}}),e.jsx(J,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:u,startIcon:e.jsx(O,{}),sx:{mt:3,mb:2,py:1.5},children:u?"Signing In...":"Sign In"}),e.jsx(c,{sx:{textAlign:"center",mt:3},children:e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(X,{component:"button",variant:"body2",onClick:P,sx:{textDecoration:"none",fontWeight:"medium"},children:"Create Account"})]})}),e.jsxs(c,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:"ðŸ“š Demo Access - Use your email with any of these passwords:"}),e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",children:"Passwords: password123, demo123, 123456, or password"}),e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:1},children:"Example: your-email@domain.com / password123"})]})]})]})})})};export{G as default};
