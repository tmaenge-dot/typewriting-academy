import{j as e,aK as A,J as k,O as C,b as d,a as o,a6 as E,a7 as y,aJ as u,aq as L,I as W,a1 as B,a2 as D,aI as T,i as q,k as O,aO as F}from"./mui-BrjAW4d2.js";import{u as R,r as n}from"./vendor-CMIq9IGj.js";import{a as V}from"./index-BgCIXPuD.js";const K=()=>{const i=R(),{login:b,isAuthenticated:p}=V(),[t,f]=n.useState({email:"",password:""}),[c,j]=n.useState(!1),[a,l]=n.useState({}),[x,g]=n.useState(!1);n.useEffect(()=>{p&&i("/",{replace:!0})},[p,i]);const h=s=>{const{name:r,value:P}=s.target;f(m=>({...m,[r]:P})),a[r]&&l(m=>({...m,[r]:""}))},w=()=>{const s={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(s.email="Please enter a valid email address"):s.email="Email is required",t.password?t.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",l(s),Object.keys(s).length===0},v=async s=>{if(s.preventDefault(),!!w()){g(!0);try{const r=await b(t.email,t.password);r.success?(sessionStorage.setItem("loginSuccess","true"),sessionStorage.setItem("loginMessage","Welcome back! You're now signed in."),i("/",{replace:!0})):l({submit:r.error||"Login failed. Please try again."})}catch{l({submit:"Login failed. Please try again."})}finally{g(!1)}}},S=()=>{j(!c)},I=()=>{i("/sign-up")};return e.jsx(A,{maxWidth:"sm",sx:{mt:4,mb:4},children:e.jsx(k,{elevation:3,children:e.jsxs(C,{sx:{p:4},children:[e.jsxs(d,{sx:{textAlign:"center",mb:4},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,color:"primary",children:"Welcome Back"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"Sign in to Information Processing & Typewriting Learning Platform"})]}),a.submit&&e.jsx(E,{severity:"error",sx:{mb:3},children:a.submit}),e.jsxs(d,{component:"form",onSubmit:v,children:[e.jsx(y,{fullWidth:!0,name:"email",label:"Email Address",type:"email",value:t.email,onChange:h,error:!!a.email,helperText:a.email,margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(u,{position:"start",children:e.jsx(L,{color:"action"})})}}),e.jsx(y,{fullWidth:!0,name:"password",label:"Password",type:c?"text":"password",value:t.password,onChange:h,error:!!a.password,helperText:a.password,margin:"normal",required:!0,InputProps:{startAdornment:e.jsx(u,{position:"start",children:e.jsx(T,{color:"action"})}),endAdornment:e.jsx(u,{position:"end",children:e.jsx(W,{"aria-label":"toggle password visibility",onClick:S,edge:"end",children:c?e.jsx(B,{}):e.jsx(D,{})})})}}),e.jsx(q,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:x,startIcon:e.jsx(O,{}),sx:{mt:3,mb:2,py:1.5},children:x?"Signing In...":"Sign In"}),e.jsx(d,{sx:{textAlign:"center",mt:3},children:e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(F,{component:"button",variant:"body2",onClick:I,sx:{textDecoration:"none",fontWeight:"medium"},children:"Create Account"})]})}),e.jsxs(d,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:"ðŸ“š Demo Access - Use your email with any of these passwords:"}),e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",children:"Passwords: password123, demo123, 123456, or password"}),e.jsx(o,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:1},children:"Example: your-email@domain.com / password123"})]})]})]})})})};export{K as default};
